(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4645:function(e,t,n){Promise.resolve().then(n.bind(n,9572))},9572:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(7437),a=n(2265),l=n(1235),i=n(6548),o=n(2126),c=n(511),s=n(7338),d=n(3283),h=n(8038),x=n(6564),u=n(1699),g=n.n(u);function m(e){let{images:t,addFlashcards:n,makeFlashcards:a,setImages:o}=e;return(0,r.jsx)(g(),{multiple:!0,value:t,onChange:(e,t)=>{o(e)},maxNumber:69,dataURLKey:"data_url",children:e=>{let{imageList:a,onImageUpload:o,onImageRemoveAll:c,onImageUpdate:s,onImageRemove:d,isDragging:h,dragProps:x}=e;return(0,r.jsxs)(l.Z,{alignItems:"center",children:[(0,r.jsx)(l.Z,{overflow:"scroll",children:a.map((e,t)=>(0,r.jsxs)(l.Z,{className:"image-item",padding:2,sx:{border:1,borderColor:"gray"},children:[(0,r.jsx)("img",{src:e.data_url,alt:"",width:"300"}),(0,r.jsx)(l.Z,{className:"image-item__btn-wrapper",alignItems:"center",children:(0,r.jsxs)(l.Z,{flexDirection:"row",gap:1,marginTop:1,children:[(0,r.jsx)(i.Z,{variant:"outlined",onClick:()=>s(t),children:"Update"}),(0,r.jsx)(i.Z,{variant:"outlined",onClick:()=>d(t),children:"Remove"})]})})]},t))}),(0,r.jsxs)(l.Z,{flexDirection:"row",marginTop:2,children:[0==t.length&&(0,r.jsx)(i.Z,{variant:"contained",style:h?{color:"red"}:void 0,onClick:o,...x,children:"Add Image"}),"\xa0",(0,r.jsx)(l.Z,{flexDirection:"row",gap:.5,children:(0,r.jsx)(i.Z,{variant:"contained",onClick:n,children:"Add Flashcards"})})]})]})}})}function j(){let[e,t]=a.useState([]),[n,u]=a.useState(void 0),[g,j]=a.useState(void 0),[p,f]=a.useState("mochi");console.log(p);let v=(0,a.useRef)([]),Z=()=>{if("mochi"===p)o.Z.post("https://app.mochi.cards/api/cards/?deck-id=".concat("[[rYkfrjIi]]","&content=card"),{content:"front/back test.","deck-id":"nXXd2JvP",fields:{name:{id:"name",value:n},V72yjxYh:{id:"V72yjxYh",value:g}}},{headers:{Authorization:"Basic NzI3MTQ3NGRkYzFkMDYxNzQwZTlhMGU2Og=="}});else{let n=v.current.map(e=>e.join("	")),r=n.join("\n"),a="data:text/tab-separated-values;charset=utf-8,"+r;console.log("tabJoined",n),console.log("newlineJoined",r),console.log("tsvContent",a);var e=encodeURI(a),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","my_data.tsv"),document.body.appendChild(t),t.click()}};(0,a.useEffect)(()=>{if(e.length>0){var t=new FormData;t.append("file",e[0].file),o.Z.post("http://127.0.0.1:8000/uploadfile/",t,{}).then(e=>{console.log(Object.keys(e.data)),u(e.data.text),j(e.data.translatedText)})}},[e]);let k=e=>{f(e.target.value)};return(0,r.jsxs)(l.Z,{gap:15,justifyContent:"center",alignItems:"center",marginTop:10,flexDirection:"row",children:[(0,r.jsx)(m,{images:e,setImages:t,makeFlashcards:Z,addFlashcards:()=>{let e=[g.replaceAll("\n"," ").replaceAll("	"," ").replaceAll("&#39;","'"),n.replaceAll("\n"," ").replaceAll("	"," ").replaceAll("&#39;","'")];v.current=[...v.current,e]}}),(0,r.jsxs)(l.Z,{children:[!!n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{variant:"h5",children:"Original Text"}),(0,r.jsx)(l.Z,{padding:2,width:400,height:200,marginBottom:3,sx:{border:1,borderColor:"gray"},overflow:"scroll",children:n})]}),!!g&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{variant:"h5",children:"Translated Text"}),(0,r.jsx)(l.Z,{padding:2,width:400,height:200,marginBottom:3,sx:{border:1,borderColor:"gray"},overflow:"scroll",children:g})]}),(0,r.jsxs)(l.Z,{flexDirection:"row",gap:1,children:[(0,r.jsx)(x.Z,{children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(h.Z,{value:"mochi",onChange:k,checked:"mochi"===p,control:(0,r.jsx)(s.Z,{}),label:"Mochi"}),(0,r.jsx)(h.Z,{value:"csv",onChange:k,checked:"csv"===p,control:(0,r.jsx)(s.Z,{}),label:"CSV File"})]})}),(0,r.jsx)(l.Z,{justifyContent:"center",sx:{minHeight:"100%"},children:(0,r.jsx)(i.Z,{sx:{height:50},variant:"contained",onClick:Z,children:"Make Flashcards"})})]})]})]})}}},function(e){e.O(0,[637,971,23,744],function(){return e(e.s=4645)}),_N_E=e.O()}]);